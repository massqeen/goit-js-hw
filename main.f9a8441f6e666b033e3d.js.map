{"version":3,"sources":["webpack:///./templates/imageCard.hbs","webpack:///./js/refs.js","webpack:///./js/components/notifyErrors.js","webpack:///./js/imagesAPI-service.js","webpack:///./js/updateImagesMarkup.js","webpack:///./js/components/Loader.js","webpack:///./js/components/lazyLoad.js","webpack:///./js/components/loadOnScroll.js","webpack:///./js/components/scrollToTop.js","webpack:///./js/components/isScrollBtnVisible.js","webpack:///./js/showLightbox.js","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","refs","gallery","document","querySelector","searchForm","toTop","getElementById","bottom","searchErrorNotFound","err","error","text","delay","sticker","imagesService","searchQuery","apiKey","baseUrl","perPage","page","editorsChoice","this","value","resetPage","incrementPage","fetchImages","fetch","query","then","res","json","images","hits","length","Error","catch","updateImagesMarkup","show","markup","imageCardTemplate","insertAdjacentHTML","reset","innerHTML","Loader","selector","hiddenClass","$el","classList","remove","hide","add","lazyLoad","imagesArr","Array","from","querySelectorAll","intersectionObserver","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","image","target","src","dataset","lazy","unobserve","rootMargin","observe","loadOnScroll","scrollToTop","scrollDuration","scrollStep","window","scrollY","scrollInterval","setInterval","scrollBy","clearInterval","isVisible","heightHide","parseInt","getAttribute","body","scrollTop","documentElement","require","showLightbox","imageSrcArr","currentTargetId","lightbox","FsLightbox","props","loadOnlyCurrentSource","exitFullscreenOnClose","sources","open","loader","editors","imagesPerPage","addEventListener","e","preventDefault","currentTarget","elements","finally","nodeName","map","source","findIndex","throttle"],"mappings":"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","file":"main.f9a8441f6e666b033e3d.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <li><div class=\\\"photo-card\\\">\\r\\n        <img class=\\\"gallery-image\\\" src=\\\"\\\" data-source=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":54},\"end\":{\"line\":3,\"column\":71}}}) : helper)))\n    + \" data-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":81},\"end\":{\"line\":3,\"column\":87}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":94},\"end\":{\"line\":3,\"column\":102}}}) : helper)))\n    + \"\\\" data-lazy=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":115},\"end\":{\"line\":3,\"column\":131}}}) : helper)))\n    + \"\\\"/>\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":16},\"end\":{\"line\":7,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":16},\"end\":{\"line\":11,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":16},\"end\":{\"line\":15,\"column\":28}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":16},\"end\":{\"line\":19,\"column\":29}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div></li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":23,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"useData\":true});","const refs = {\r\n  gallery: document.querySelector('.gallery'),\r\n  searchForm: document.querySelector('#search-form'),\r\n  toTop: document.getElementById('goto-topJS'),\r\n  bottom: document.querySelector('.bottom')\r\n};\r\nexport default refs;\r\n","import { error } from '@pnotify/core';\r\n\r\nconst searchErrorNotFound = (err) =>\r\n  error({\r\n    text: `${err}`,\r\n    delay: 3000,\r\n    sticker: false\r\n  });\r\nexport default searchErrorNotFound;\r\n","import searchErrorNotFound from './components/notifyErrors';\r\n\r\nconst imagesService = {\r\n  searchQuery: '',\r\n  apiKey: '18257903-4453e2975e3dd917fd04b41f9',\r\n  baseUrl: 'https://pixabay.com/api/',\r\n  perPage: 10,\r\n  page: 1,\r\n  editorsChoice: true,\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  },\r\n  set query(value) {\r\n    this.searchQuery = value;\r\n  },\r\n  set editors(value) {\r\n    this.editorsChoice = value;\r\n  },\r\n  set imagesPerPage(value) {\r\n    this.perPage = value;\r\n  },\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  },\r\n\r\n  fetchImages() {\r\n    return fetch(\r\n      `${this.baseUrl}?key=${this.apiKey}&q=${this.query}&per_page=${this.perPage}&page=${this.page}\r\n      &editors_choice=${this.editorsChoice}`\r\n    )\r\n      .then((res) => res.json())\r\n      .then(({ hits: images }) => {\r\n        if (!images.length) {\r\n          throw new Error('Unfortunately, your request not found.');\r\n        }\r\n        this.incrementPage();\r\n        return images;\r\n      })\r\n      .catch((err) => {\r\n        searchErrorNotFound(err);\r\n      });\r\n  }\r\n};\r\n\r\nexport default imagesService;\r\n","import imageCardTemplate from '../templates/imageCard.hbs';\r\nimport refs from './refs';\r\n\r\nconst updateImagesMarkup = {\r\n  show(images) {\r\n    const markup = imageCardTemplate(images);\r\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\r\n  },\r\n  reset() {\r\n    refs.gallery.innerHTML = '';\r\n  }\r\n};\r\n\r\nexport default updateImagesMarkup;\r\n","class Loader {\r\n  constructor(selector, hiddenClass) {\r\n    this.$el = document.querySelector(selector);\r\n    this.hiddenClass = hiddenClass;\r\n  }\r\n  show() {\r\n    this.$el.classList.remove(this.hiddenClass);\r\n  }\r\n  hide() {\r\n    this.$el.classList.add(this.hiddenClass);\r\n  }\r\n}\r\nexport default Loader;\r\n","const lazyLoad = () => {\r\n  const imagesArr = Array.from(document.querySelectorAll('.gallery-image'));\r\n  const options = { rootMargin: '100px' };\r\n  const onEntry = (entries, observer) => {\r\n    entries.forEach((entry) => {\r\n      if (entry.isIntersecting) {\r\n        const image = entry.target;\r\n        image.src = image.dataset.lazy;\r\n        observer.unobserve(image);\r\n      }\r\n    });\r\n  };\r\n  const intersectionObserver = new IntersectionObserver(onEntry, options);\r\n  imagesArr.forEach((image) => intersectionObserver.observe(image));\r\n};\r\n\r\nexport default lazyLoad;\r\n","import refs from '../refs';\r\nimport imagesService from '../imagesAPI-service';\r\nimport updateImagesMarkup from '../updateImagesMarkup';\r\nimport lazyLoad from './lazyLoad';\r\n\r\nconst loadOnScroll = () => {\r\n  const options = { rootMargin: '500px' };\r\n  const onEntry = (entries) => {\r\n    entries.forEach((entry) => {\r\n      if (entry.isIntersecting) {\r\n        imagesService.fetchImages().then((images) => {\r\n          updateImagesMarkup.show(images);\r\n          lazyLoad();\r\n        });\r\n      }\r\n    });\r\n  };\r\n  const intersectionObserver = new IntersectionObserver(onEntry, options);\r\n  intersectionObserver.observe(refs.bottom);\r\n};\r\n\r\nexport default loadOnScroll;\r\n","function scrollToTop(scrollDuration) {\r\n  let scrollStep = -window.scrollY / (scrollDuration / 800),\r\n    scrollInterval = setInterval(function () {\r\n      if (window.scrollY !== 0) {\r\n        window.scrollBy(0, scrollStep);\r\n      } else {\r\n        clearInterval(scrollInterval);\r\n      }\r\n    }, 400);\r\n}\r\n\r\nexport default scrollToTop;\r\n","import refs from '../refs';\r\n\r\nfunction isVisible() {\r\n  // eslint-disable-next-line radix\r\n  let heightHide = parseInt(refs.toTop.getAttribute('height-hide')) || 100;\r\n  if (\r\n    document.body.scrollTop > heightHide ||\r\n    document.documentElement.scrollTop > heightHide\r\n  ) {\r\n    refs.toTop.classList.remove('simplescrollup__button--hide');\r\n    refs.toTop.classList.add('simplescrollup__button--show');\r\n  } else {\r\n    // Hide\r\n    refs.toTop.classList.remove('simplescrollup__button--show');\r\n    refs.toTop.classList.add('simplescrollup__button--hide');\r\n  }\r\n}\r\n\r\nexport default isVisible;\r\n","require('fslightbox');\r\n\r\nconst showLightbox = (imageSrcArr, currentTargetId) => {\r\n  const lightbox = new FsLightbox();\r\n  lightbox.props.loadOnlyCurrentSource = true;\r\n  lightbox.props.exitFullscreenOnClose = true;\r\n  lightbox.props.sources = imageSrcArr;\r\n  lightbox.open(currentTargetId);\r\n};\r\n\r\nexport default showLightbox;\r\n","import './scss/main.scss';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\nimport throttle from 'lodash.throttle';\r\nimport refs from './js/refs';\r\nimport imagesService from './js/imagesAPI-service';\r\nimport updateImagesMarkup from './js/updateImagesMarkup';\r\nimport Loader from './js/components/Loader';\r\nimport lazyLoad from './js/components/lazyLoad';\r\nimport loadOnScroll from './js/components/loadOnScroll';\r\nimport scrollToTop from './js/components/scrollToTop';\r\nimport isVisible from './js/components/isScrollBtnVisible';\r\n\r\nimport showLightbox from './js/showLightbox';\r\n\r\nconst loader = new Loader('.js-loader', 'is-hidden');\r\n\r\nimagesService.fetchImages().then((images) => {\r\n  updateImagesMarkup.show(images);\r\n  lazyLoad();\r\n  imagesService.editors = false;\r\n  imagesService.imagesPerPage = 12;\r\n});\r\n\r\nconst submitHandler = (e) => {\r\n  e.preventDefault();\r\n  updateImagesMarkup.reset();\r\n  loader.show();\r\n  imagesService.query = e.currentTarget.elements.query.value;\r\n  imagesService.resetPage();\r\n  imagesService\r\n    .fetchImages()\r\n    .then((images) => {\r\n      updateImagesMarkup.show(images);\r\n      lazyLoad();\r\n      loadOnScroll();\r\n    })\r\n    .finally(() => loader.hide());\r\n  e.currentTarget.reset();\r\n};\r\n\r\nconst galleryClickHandler = ({ target }) => {\r\n  if (target.nodeName === 'IMG') {\r\n    const imageElArr = Array.from(\r\n      refs.gallery.querySelectorAll('.gallery-image')\r\n    );\r\n    const imageSrcArr = imageElArr.map((image) => image.dataset.source);\r\n    const currentTargetId = imageSrcArr.findIndex(\r\n      (value) => value === target.dataset.source\r\n    );\r\n    showLightbox(imageSrcArr, currentTargetId);\r\n  }\r\n};\r\n\r\nrefs.searchForm.addEventListener('submit', submitHandler);\r\nrefs.gallery.addEventListener('click', galleryClickHandler);\r\nrefs.toTop.addEventListener('click', function () {\r\n  scrollToTop(1);\r\n});\r\nwindow.addEventListener('scroll', throttle(isVisible, 500));\r\n"],"sourceRoot":""}